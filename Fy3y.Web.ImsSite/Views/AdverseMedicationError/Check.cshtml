@model Fy3y.Model.Das.AdverseMedicationError
@{
  ViewBag.Title = "药品差错事件审核";
}
<br />
<div class="form-group row">
  <label class="col-2 col-form-label">报告科室</label>
  <div class="col-4">
    @Html.TextBoxFor(m => m.AdverseEvent.ReporterDeptName, new { @class = "form-control", @readonly = "" })
  </div>
  <label class="col-2 col-form-label">报告时间</label>
  <div class="col-4">
    @Html.TextBoxFor(m => m.AdverseEvent.ReportTime, new { @class = "form-control" })
  </div>
</div>

<div class="text-center">
  <!--基本资料-->
  <fieldset>
    <legend>A-基本资料</legend>
    <div class="form-group row">
      <label class="col-2 col-form-label">病案号码</label>
      <div class="col-4">
        @Html.TextBoxFor(m => m.AdverseEvent.MedicalNo, new { @class = "form-control", placeholder = "住院号/门诊号" })
      </div>
      <label class="col-2 col-form-label">患者姓名</label>
      <div class="col-4">
        @Html.TextBoxFor(m => m.AdverseEvent.PatientName, new { @class = "form-control" })
      </div>
    </div>
    <div class="form-group row">

      <label class="col-2 col-form-label">患者性别</label>
      <div class="col-4">
        @Html.TextBoxFor(m => m.AdverseEvent.PatientSex, new { @class = "form-control", list = "sexList" })
        <datalist id="sexList">
          <option>男</option>
          <option>女</option>
          <option>其他</option>
        </datalist>
      </div>
      <label class="col-2 col-form-label">患者年龄</label>
      <div class="col-4">
        @Html.TextBoxFor(m => m.AdverseEvent.PatientAge, new { @class = "form-control", required = "" })
      </div>

    </div>
    <div class="form-group row">
      <label class="col-2 col-form-label">所在科室</label>
      <div class="col-4">
        @Html.TextBoxFor(m => m.AdverseEvent.PatientDeptName, new { @class = "form-control" })
      </div>
      <label class="col-2 col-form-label">所在床号</label>
      <div class="col-4">
        @Html.TextBoxFor(m => m.AdverseEvent.BedNo, new { @class = "form-control" })
      </div>

    </div>

    <div class="form-group row">
      <label class="col-2 col-form-label">临床诊断</label>
      <div class="col-10">
        @Html.TextBoxFor(m => m.AdverseEvent.Diagnosis, new { @class = "form-control" })
      </div>
    </div>
  </fieldset>
  <!--B-事件情况-->
  <fieldset>
    <legend>B-事件情况</legend>
    <div class="form-group row">
      <label class="col-2 col-form-label">事件时间</label>
      <div class="col-4">
        @Html.TextBoxFor(m => m.AdverseEvent.EventTime, new { @class = "form-control", onfocus = "WdatePicker({ isShowClear: false, readOnly: true, isShowOK: false, maxDate: '%y-%M-%d', dateFmt: 'yyyy/MM/dd HH:mm' })" })
      </div>
    </div>
    <div class="form-group row">
      <label class="col-2 col-form-label">事件经过</label>
      <div class="col-10">
        @Html.TextAreaFor(m => m.CourseOfEvent, 3, 2, new { @class = "form-control", required = "" })
      </div>
    </div>
    <div class="form-group row">
      <label class="col-2 col-form-label">涉及药品</label>
      <div class="col-10">
        @Html.TextAreaFor(m => m.DrugInfo, 3, 2, new { @class = "form-control", required = "" })
      </div>
    </div>
    <div class="form-group row">
      <label class="col-2 col-form-label">不合理判断</label>
      <div class="col-4">
        @Html.TextBoxFor(m => m.UnreasonableJudgment, new { @class = "form-control", required = "", list = "judgmentList" })
        <datalist id="judgmentList">
          <option>皮试相关</option>
          <option>诊断相符性</option>
          <option>用法用量</option>
          <option>给药方式</option>
          <option>重复用药</option>
          <option>药剂/药理配伍禁忌</option>
          <option>过敏史禁忌</option>
          <option>特殊人群个体化</option>
        </datalist>
      </div>
      <label class="col-2 col-form-label">差错环节</label>
      <div class="col-4">
        @Html.TextBoxFor(m => m.ErrorLink, new { @class = "form-control", required = "", list = "errorList" })
        <datalist id="errorList">
          <option>医嘱开立</option>
          <option>护士确认</option>
          <option>药师调剂</option>
          <option>药品配送</option>
          <option>药品储存</option>
          <option>给药过程</option>
          <option>监测过程</option>
        </datalist>
      </div>
    </div>
    <div class="form-group row">

      <label class="col-2 col-form-label">事发人员</label>
      <div class="col-4">
        @Html.TextBoxFor(m => m.Parties, new { @class = "form-control", required = "", list = "professional" })
      </div>
      <label class="col-2 col-form-label">发现人员</label>
      <div class="col-4">
        @Html.TextBoxFor(m => m.Discoverer, new { @class = "form-control", required = "", list = "professional" })
      </div>
      <datalist id="professional">
        <option>医生：</option>
        <option>护士：</option>
        <option>药师：</option>
        <option>工人：</option>
        <option>其他：</option>
      </datalist>
    </div>
  </fieldset>
  <!--C-事件结果-->
  <fieldset>
    <legend>C-事件结果</legend>
    <div class="form-group row">
      <label class="col-2 col-form-label">伤害程度</label>
      <div class="col-4">
        @Html.TextBoxFor(m => m.LevelOfInjury, new { @class = "form-control", list = "injuryList", required = "" })
        <datalist id="injuryList">
          <option>无伤害</option>
          <option>轻度伤害</option>
          <option>中度伤害</option>
          <option>重度伤害</option>
          <option>极重伤害</option>
        </datalist>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-2 col-form-label">事件结果</label>
      <div class="col-10">
        @Html.TextAreaFor(m => m.EventResult, 3, 2, new { @class = "form-control", required = "" })
      </div>
    </div>
  </fieldset>

  <!-- D-改进措施-->
  <fieldset>
    <legend>
      D-改进措施
    </legend>
    <div class="form-group row">
      <label class="col-2">改进措施</label>
      <div class="col-10  text-left">
        @Html.TextAreaFor(m => m.SuggestionsForImprovement, 3, 2, new { @class = "form-control", required = "" })
      </div>
    </div>
  </fieldset>
</div>


<!--E-主管审核-->
<form id="form1" onsubmit="return validForm()" method="post">
  @Html.AntiForgeryToken()
  <fieldset>
    <legend>E-主管审核</legend>

    <div class="form-group row text-center">
      <label class="col-2 col-form-label">主管意见</label>
      <div class="col-10">

        @Html.TextAreaFor(m => m.SuperiorOpinion, new { @class = "form-control", rows = 3 })
      </div>
    </div>
  </fieldset>
  @Html.HiddenFor(m => m.EventId)
  <div class="text-center">
    <button class="btn btn-dark" id="btnSubmit">保存</button>
    <a href="@Url.Action("Manage","AdverseEvent")">返回</a>
  </div>
</form>

<script type="text/javascript">
  //验证表单内容是否存在
  function validForm() {
    return $("#form1").validate({
      rules: {
        SuperiorOpinion: {
          required: true
        }
      }
    });
  }

  //注册表单验证方法
  $(validForm());
  //保存数据

</script>